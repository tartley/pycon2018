<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Jonathan Hartley">
  <title>PyCon 2018</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../reveal.js/css/reveal.css">
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../reveal.js/css/theme/solarized.css" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? '../reveal.js/css/print/pdf.css' : '../reveal.js/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="../reveal.js/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">PyCon 2018</h1>
  <p class="author">Jonathan Hartley</p>
  <p class="date">May 2018</p>
</section>

<section id="pycon-2018" class="slide level2">
<h2>PyCon 2018</h2>
<p>Cleveland, Ohio.</p>
<aside class="notes">
<p>The conference took place last week, in Cleveland, OH. Attendance was about 3,300. So it’s a smaller conference than languages like Java or C#, but in keeping as a conference run by the community, for the community, it tends to make up for that by having fewer commercially oriented sales pitches, being instead more dominated by enthusiastic practitioners. So it’s more of a programmer’s conference.</p>
<p>If there’s anyone listening who isn’t familiar with Python, you can get a taste of it here, at the shortest language overview I’ve ever seen: https://learnxinyminutes.com/docs/python3/</p>
</aside>
</section>
<section id="python-3.7" class="slide level2">
<h2>Python 3.7</h2>
<p>Currently in beta, expected final release in June.</p>
<aside class="notes">
<p>One big topic of the conference was the imminent Python 3.7 release. It’s currently in final beta, with expected final release in June.</p>
<p>This release adds significant improvement to type annotations, and introduces dataclasses, both of which I’ll say more about in a minute,</p>
<p>See the many improvements and fixes at</p>
</aside>
<p>https://docs.python.org/3.7/whatsnew/3.7.html</p>
</section>
<section id="type-annotations" class="slide level2">
<h2>Type Annotations</h2>
<aside class="notes">
<p><em>Type annotations</em> aren’t new to 3.7 - they are a language feature that has been gradually phased into the language over the last few years. They receive further improvements and fixes in 3.7, widespread adoption, and were a central focus of this year’s conference in ways they haven’t been previously.</p>
<p>Python has always been strongly typed, although those types are both <em>implicit</em>, rather than declared explicitly in code, and they are <em>dynamic</em>, meaning that variables, including function parameters and return values, can refer to different types over time.</p>
<p>Type annotation lets users voluntarily abandon these features, in favour of types that are both <em>explicit</em> and <em>static</em>.</p>
<p>For example, to declare the type of a variable:</p>
</aside>
</section>
<section id="type-annotations-1" class="slide level2">
<h2>Type Annotations</h2>
<p>To declare a variable’s type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1">x : <span class="bu">str</span> <span class="op">=</span> <span class="st">&quot;hello&quot;</span></a></code></pre></div>
<p>Strictly speaking, this declration of ‘x’ as a ‘str’ is redundant - in this case, the type of x would be inferred, even without any type annotation. But it gives you a flavor of the syntax. Straight away though, this highlights one important part of type annotations in Python - they are not only optional, but in some cases you’ll get all the benefits without even adding any annotations to the code. More on this later…</p>
</section>
<section id="type-annotations-2" class="slide level2">
<h2>Type Annotations</h2>
<p>Or declare a function’s parameters and return type:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">def</span> greeting(name: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</a>
<a class="sourceLine" id="cb2-2" title="2">    <span class="cf">return</span> <span class="ss">f&quot;Hello </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!&quot;</span></a></code></pre></div>
</section>
<section id="type-annotations-3" class="slide level2">
<h2>Type Annotations</h2>
<aside class="notes">
<p>A ‘typing’ module provides support for more involved declarations, such as declaring the types of a container’s items:</p>
</aside>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb3-1" title="1"><span class="im">from</span> typing <span class="im">import</span> List</a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3">Vector <span class="op">=</span> List[<span class="bu">float</span>]</a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw">def</span> scale(scalar: <span class="bu">float</span>, vector: Vector) <span class="op">-&gt;</span> Vector:</a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="cf">return</span> [scalar <span class="op">*</span> num <span class="cf">for</span> num <span class="kw">in</span> vector]</a></code></pre></div>
<aside class="notes">
<p>The above syntax and the standard library typing module are Python 3 only, but Python 2 users can use an alternative syntax, embedded in comments, and a port of the typing module is available as a (https://docs.python.org/3/library/typing.html)[downloadable module on PyPI.] So all of this applies to Python2 just as much as Python3.</p>
<p>For the last few years, type annotations have been regarded with some wariness and suspicion. They make source code more visually noisy, and they defy Python’s dynamic typing. These have both been core tenets of the language, and are arguably major reasons why Python is so pleasant and productive to code in.</p>
<p>However, the community seem to be coming around to the benefits. This is the first PyCon at which the prevailing consensus seemed to be in favor of the feature, rather than reserved or even outright hostile.</p>
<p>There were several talks on the topic both explorations of static analysis and types, and retrospectives from real-world use. Companies such as Instagram and Dropbox provided talks that reported positively on introducing type annotations across multi-million line codebases.</p>
<p>This positivity is reinforced by the 3.7 release, which includes important improvements and fixes, such as allowing forward references. These are important in cases such as when a class contains references to itself.</p>
</aside>
</section>
<section id="type-annotations-4" class="slide level2">
<h2>Type Annotations</h2>
<p>Forward declarations</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">class</span> Node:</a>
<a class="sourceLine" id="cb4-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, parent):</a>
<a class="sourceLine" id="cb4-3" title="3">        <span class="va">self</span>.parent : Node <span class="op">=</span> parent</a></code></pre></div>
<aside class="notes">
<p>Quite deliberately, the interpreter itself does no runtime checks that values correspond to the declared types. It attaches no meaning to these annotations, other than making the annotations available to third party tools inspecting the code.</p>
<p>One such tool is ‘mypy’. which checks the annotations at ‘linting time’, the same time you might run tools like PyLint.</p>
</aside>
</section>
<section id="type-annotations-5" class="slide level2">
<h2>Type Annotations</h2>
<p>MyPy</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">def</span> greeting(name: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</a>
<a class="sourceLine" id="cb5-2" title="2">    <span class="cf">return</span> <span class="ss">f&quot;Hello </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!&quot;</span></a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="bu">print</span>(greeting(<span class="dv">123</span>))</a></code></pre></div>
<aside class="notes">
<p>Given a usage which breaks the typing constraints,</p>
</aside>
<pre><code>$ mypy variable.py
type_me.py:4: error: Argument 1 to &quot;greeting&quot; has incompatible
type &quot;int&quot;; expected &quot;str</code></pre>
<aside class="notes">
<p>it produces an appropriate error message.</p>
<p>The benefits of this are:</p>
</aside>
</section>
<section id="type-annotations-6" class="slide level2">
<h2>Type Annotations</h2>
<ul>
<li>Correctness</li>
<li>Readability</li>
<li>Performance</li>
</ul>
<aside class="notes">
<ul>
<li>Correctness. Checking, at lint time, analogous to a static language’s compile-time checks.</li>
<li>Readability. When you see a call to a obj.validate() method, if you know the type of ‘obj’ then in many cases you can immediately know exactly which validate method is getting called. This is useful for both human readers, and for tools such as code editors doing a ‘go to definition’, which previously would often have to provide a list of possible definitions to choose between.</li>
<li>Performance. There is speculative potential for this to feed into runtime optimisation.
<ul>
<li>CPython is about 100 times slower than C</li>
<li>Averaged across all benchmarks, PyPy the optimised Python interpreter written in Python, executes the same source code 7 times faster than CPython.</li>
<li>Cython, with some work manually annotating C types in Python source code, is comparable with C.</li>
</ul></li>
</ul>
<p>PyPy and Cython achieve their speed by trading off dynamic language features for speed, which they are able to do by nailing down the type of variables, either using source code annotation, or by inspecting types at runtime. In theory Python’s new type annotations could drive or aid type inferences like this, providing a run time performance boost.</p>
</aside>
</section>
<section id="type-annotations-7" class="slide level2">
<h2>Type Annotations</h2>
<p>Are optional.</p>
<aside class="notes">
<p>A critical part of this whole picture is that type annotations are, and always will be, entirely optional.</p>
<p>Type annotations can be added partially, for judiciously chosen sections of code, or for individual variables, leaving everything around them dynamic. It can be done at any point during development. It doesn’t have to happen from the beginning of a project.</p>
<p>This supports the concept of <em>gradual typing</em>, which has an illustrious history, laying claim to provide the best of both worlds in the great static versus dynamic holy war.</p>
<p>So the takeaway is that the type annotation experiment is being considered a success, and it looks to be a central part of Python’s future.</p>
</aside>
</section>
<section id="new-namedtuple-syntax" class="slide level2">
<h2>New NamedTuple Syntax</h2>
<aside class="notes">
<p>For an example of type annotations being integrated into the language, Python 3.6 introduced a much improved syntax for namedtuples.</p>
<p>Regular tuples are Python’s immutable sequence, storing a heterogeneous sequence of values which cannot later be modified. For those not familiar with Python, think of these as an array of pointers to objects, where ‘objects’ in Python means anything at all, including other collections, functions or lambdas, classes, or any built-in type.</p>
</aside>
</section>
<section id="new-namedtuple-syntax-1" class="slide level2">
<h2>New NamedTuple Syntax</h2>
<p>A regular tuple:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb7-1" title="1">x <span class="op">=</span> (<span class="dv">3</span>, <span class="st">&quot;abc&quot;</span>, <span class="fl">4.5</span>)</a></code></pre></div>
<aside class="notes">
<p>In practice, this lends itself to the sematics of a struct, a lightweight alternative to defining a new class.</p>
</aside>
</section>
<section id="new-namedtuple-syntax-2" class="slide level2">
<h2>New NamedTuple Syntax</h2>
<p>Using a regular tuple:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb8-1" title="1">hue <span class="op">=</span> <span class="dv">45</span></a>
<a class="sourceLine" id="cb8-2" title="2">saturation <span class="op">=</span> <span class="fl">0.1</span></a>
<a class="sourceLine" id="cb8-3" title="3">lightness <span class="op">=</span> <span class="fl">0.9</span></a>
<a class="sourceLine" id="cb8-4" title="4">color <span class="op">=</span> (hue, saturation, lightness)</a></code></pre></div>
<aside class="notes">
<p>Here, the position in the sequence implies a particular meaning. The first value always represents a hue, the second a saturation, and the third a lightness.</p>
<p>It makes no sense to try and append or remove items from the tuple. The values in there are best thought of as attributes of a value type, not items in a sequence.</p>
<p>Although convenient, the disadvantage of using tuples in this way is that addressing individual elements requires a numeric index:</p>
</aside>
</section>
<section id="new-namedtuple-syntax-3" class="slide level2">
<h2>New NamedTuple Syntax</h2>
<p>Addressing fields of a regular tuple:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb9-1" title="1">saturation <span class="op">=</span> color[<span class="dv">1</span>]</a></code></pre></div>
<aside class="notes">
<p>This is cryptic and ugly.</p>
<p>To fix this, <em>named</em> tuples were introduced to the standard library a few years ago.</p>
<p>They provide a type of tuple which, amongst other things, is also addressable by field name:</p>
</aside>
</section>
<section id="new-namedtuple-syntax-4" class="slide level2">
<h2>New NamedTuple Syntax</h2>
<p>Using a named tuple:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb10-1" title="1">saturation <span class="op">=</span> color.saturation</a></code></pre></div>
<aside class="notes">
<p>This is much better.</p>
<p>However, the wart on using named tuples has always been that they are not built into the core language, but instead were built on top of it, and so lack a dedicated syntax for creating the namedtuple type.</p>
<p>Hence, defining a named tuple looks like this:</p>
</aside>
</section>
<section id="new-namedtuple-syntax-5" class="slide level2">
<h2>New NamedTuple Syntax</h2>
<p>Declaring a named tuple:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb11-1" title="1"><span class="im">from</span> collections <span class="im">import</span> namedtuple</a>
<a class="sourceLine" id="cb11-2" title="2"></a>
<a class="sourceLine" id="cb11-3" title="3">Color <span class="op">=</span> namedtuple(<span class="st">&#39;Color&#39;</span>, [<span class="st">&#39;hue&#39;</span>, <span class="st">&#39;saturation&#39;</span>, <span class="st">&#39;lightness&#39;</span>])</a></code></pre></div>
<p>:-(</p>
<aside class="notes">
<p>This is clunky and underpowered. It looks nothing like declaration of a regular class, nor like structures in other languages.</p>
<p>But 3.6 introduced a new way to declare named tuples, which again requires no dedicated syntax, but this time leans on type annotations and is much more acceptable:</p>
</aside>
</section>
<section id="new-namedtuple-syntax-6" class="slide level2">
<h2>New NamedTuple Syntax</h2>
<p>Sane named tuple declaration:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb12-1" title="1"><span class="im">from</span> typing <span class="im">import</span> NamedTuple</a>
<a class="sourceLine" id="cb12-2" title="2"></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="kw">class</span> Color(NamedTuple):</a>
<a class="sourceLine" id="cb12-4" title="4">    hue: <span class="bu">int</span></a>
<a class="sourceLine" id="cb12-5" title="5">    saturation: <span class="bu">float</span></a>
<a class="sourceLine" id="cb12-6" title="6">    lightness: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.5</span></a></code></pre></div>
<aside class="notes">
<p>Syntactically, this is just a regular class, with some class-level attributes, and those attributes have type annoations.</p>
<p>But the NamedTuple base class triggers some metaclass magic to transform this into a namedtuple, rather than a regular class.</p>
<p>(Although the NamedTuple base class is defined in the PyPI backport of typing for Python 2.7, the language syntax for annotations is not available in Python2, and I’ve been unable to find a way to get this to work using the Python2 “types as comments” syntax.)</p>
<p>As usual, the Python interpreter does nothing with these type annotations. But tools like mypy will use them to validate instances of Color.</p>
<p>This far more closely resembles the creation of regular classes, and also allows for default values on attributes.</p>
<p>It also converges the syntax for creating namedtuples with that for creating a major new feature of Python3.7, dataclasses.</p>
</aside>
</section>
<section id="dataclasses" class="slide level2">
<h2>DataClasses</h2>
<aside class="notes">
<p>Namedtuples are very useful as lightweight structs, but sometimes one needs to define a value type with different behavior than the underlying tuple provides.</p>
<p>Traditionally at this point in Python one would define a regular class:</p>
</aside>
</section>
<section id="dataclasses-1" class="slide level2">
<h2>DataClasses</h2>
<p>Using a regular class:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">class</span> Employee:</a>
<a class="sourceLine" id="cb13-2" title="2">    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name: <span class="bu">str</span>, age: <span class="bu">int</span>, manager: Employee):</a>
<a class="sourceLine" id="cb13-3" title="3">        <span class="va">self</span>.name <span class="op">=</span> name</a>
<a class="sourceLine" id="cb13-4" title="4">        <span class="va">self</span>.age <span class="op">=</span> age</a>
<a class="sourceLine" id="cb13-5" title="5">        <span class="va">self</span>.manager <span class="op">=</span> manager</a>
<a class="sourceLine" id="cb13-6" title="6"></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co"># Gives the desired behavior for reference types:</span></a>
<a class="sourceLine" id="cb13-8" title="8">e1 <span class="op">=</span> Employee(<span class="st">&#39;alice&#39;</span>, <span class="dv">55</span>, <span class="va">None</span>)</a>
<a class="sourceLine" id="cb13-9" title="9">e2 <span class="op">=</span> Employee(<span class="st">&#39;bob&#39;</span>, <span class="dv">45</span>, e1)</a>
<a class="sourceLine" id="cb13-10" title="10">e1 <span class="op">==</span> e2 <span class="co"># False</span></a>
<a class="sourceLine" id="cb13-11" title="11">e1 <span class="op">&lt;</span> e2 <span class="co"># Type Error: &#39;&lt;&#39; not supported</span></a></code></pre></div>
<aside class="notes">
<p>Such a class behaves pretty well out of the box for <em>reference</em> or <em>identity</em> types. For these types of classes we don’t want two employees to compare equal even if all their attributes are the same. Such instances should instead compare based on identity.</p>
<p>Also, we don’t want reference types like this to be comparable by inequalities. It usually makes no sense to ask if one employee is “less than” another. Hence these will also not be sortable.</p>
<p>This is exactly how regular classes behave out of the box, so they’re perfect for this case.</p>
<p>But if you’re defining a <em>value</em> type, these are commonly not the behaviors you want.</p>
<p>Commonly desired value type semantics, for example would consider two instances with identical attributes to be equal.</p>
</aside>
</section>
<section id="dataclasses-2" class="slide level2">
<h2>DataClasses</h2>
<p>Desired value type behavior:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># Desireable value type behavior</span></a>
<a class="sourceLine" id="cb14-2" title="2">c1 <span class="op">=</span> Card(<span class="st">&quot;Q&quot;</span>, <span class="st">&quot;Hearts&quot;</span>)</a>
<a class="sourceLine" id="cb14-3" title="3">c2 <span class="op">=</span> Card(<span class="st">&quot;Q&quot;</span>, <span class="st">&quot;Hearts&quot;</span>)</a>
<a class="sourceLine" id="cb14-4" title="4">c1 <span class="op">==</span> c2 <span class="co"># True</span></a></code></pre></div>
<aside class="notes">
<p>So, for example, in contrast to regular class behavior, we’d like playing card instances to compare equal if they have the same attribute values, not just if they are the identical instance.</p>
<p>Similarly, many value types have default expectations with regard to inequalities such as “less than”, and hence ought to be sortable by default.</p>
<p>Also, we’d like sensible value-type hashing behaviour, so these classes could be used in sets, or as keys in dictionaries.</p>
<p>Regular classes, tuned as they are for reference type behaviour, need customizing with custom methods to provide these behaviors:</p>
</aside>
</section>
<section id="dataclasses-3" class="slide level2">
<h2>DataClasses</h2>
<p>Customizing regular classes with manually written methods:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">def</span> <span class="fu">__eq__</span>(<span class="va">self</span>, other):</a>
<a class="sourceLine" id="cb15-2" title="2">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb15-3" title="3">        <span class="va">self</span>.rank <span class="op">==</span> other.rank <span class="kw">and</span></a>
<a class="sourceLine" id="cb15-4" title="4">        <span class="va">self</span>.suit <span class="op">==</span> other.suit</a>
<a class="sourceLine" id="cb15-5" title="5">    )</a></code></pre></div>
<aside class="notes">
<p>This is easily done but is verbose and repetitive boilerplate code.</p>
<p>The solution to this problem is Data classes, newly introduced in 3.7, (No Python2.7 backport exists - although if you’re stuck on 2.7, many comparable features exist in <a href="&#39;attrs&#39;%20on%20PyPI">https://pypi.org/project/attrs/</a>, which was one of the spiritual precursors to dataclasses.)</p>
</aside>
</section>
<section id="dataclasses-4" class="slide level2">
<h2>DataClasses</h2>
<p>Defining a data class</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb16-1" title="1"><span class="im">from</span> dataclasses <span class="im">import</span> dataclass</a>
<a class="sourceLine" id="cb16-2" title="2"></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="at">@dataclass</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="kw">class</span> Card:</a>
<a class="sourceLine" id="cb16-5" title="5">    rank: <span class="bu">str</span></a>
<a class="sourceLine" id="cb16-6" title="6">    suit: <span class="bu">str</span></a></code></pre></div>
<aside class="notes">
<p>These are designed for the times when you want value type semantics out of the box, much reducing the need for boilerplate code.</p>
<p>The above Card class supports the sort of comparison operators you’d generally want by default for a value type. It also provides a decent string representation, and sensible hashing so that these instances can be used in sets, and as keys in dictionaries.</p>
<p>As before, data class fields can be given a default value:</p>
</aside>
</section>
<section id="dataclasses-5" class="slide level2">
<h2>DataClasses</h2>
<p>Default field values:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb17-1" title="1"><span class="at">@dataclass</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="kw">class</span> Point:</a>
<a class="sourceLine" id="cb17-3" title="3">    x: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.0</span></a>
<a class="sourceLine" id="cb17-4" title="4">    y: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.0</span></a>
<a class="sourceLine" id="cb17-5" title="5">    z: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.0</span></a>
<a class="sourceLine" id="cb17-6" title="6"></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="op">&gt;&gt;&gt;</span> Point(y<span class="op">=</span><span class="fl">1.23</span>)</a>
<a class="sourceLine" id="cb17-8" title="8">Point(x<span class="op">=</span><span class="fl">0.0</span>, y<span class="op">=</span><span class="fl">1.23</span>, z<span class="op">=</span><span class="fl">0.0</span>)</a></code></pre></div>
<aside class="notes">
<p>Although mutable by default, a data class can be declared, at class creation time, to be immutable:</p>
</aside>
</section>
<section id="dataclasses-6" class="slide level2">
<h2>DataClasses</h2>
<p>Immutable instances:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb18-1" title="1"><span class="at">@dataclass</span>(frozen<span class="op">=</span><span class="va">True</span>)</a>
<a class="sourceLine" id="cb18-2" title="2"><span class="kw">class</span> Point:</a>
<a class="sourceLine" id="cb18-3" title="3">    x: <span class="bu">float</span></a>
<a class="sourceLine" id="cb18-4" title="4">    y: <span class="bu">float</span></a>
<a class="sourceLine" id="cb18-5" title="5">    z: <span class="bu">float</span></a>
<a class="sourceLine" id="cb18-6" title="6"></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="op">&gt;&gt;&gt;</span> p <span class="op">=</span> Point(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb18-8" title="8"><span class="op">&gt;&gt;&gt;</span> p.z <span class="op">=</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb18-9" title="9">dataclasses.FrozenInstanceError: cannot assign to field <span class="st">&#39;name&#39;</span></a></code></pre></div>
<aside class="notes">
<p>Similarly, other creation parameters can control whether instances are comparable &amp; sortable, hashable, and which fields are significant in comparisons and in the string representation.</p>
<p>Features like this have been battle-tested for a long time in existing 3rd-party libraries such as ‘attrs’, but this was suffering from a proliferation of almost-identical competitors, so it makes sense for this sort of feature to finally be embraced and supported as part of the standard library.</p>
</aside>
</section>
<section id="education-outreach" class="slide level2">
<h2>Education &amp; outreach</h2>
<aside class="notes">
<p>Education and outreach to the disadvantaged has long been an explicit focus of PyCon, with dedicated talks and sessions on the topic. Teachers and other educators attend the conference and mix freely with programmers, sparking many productive and fascinating conversations in hallways and over lunch.</p>
<p>Presentations included a talk by a 13 year old student about a visual programming language he had created in Python, inspired by Scratch but using Pythonic syntax.</p>
<p>One keynote focussed on the experiences of a Detroit public librarian, teaching Python to disadvantaged school children, and there wasn’t a dry eye in the house as she described the ferocious determination the kids exhibited, overcoming huge obstacles in their lives in order to attend, and the life-chaning effects the class had on many of them.</p>
</aside>
</section>
<section id="inclusiveness-diversity" class="slide level2">
<h2>Inclusiveness &amp; diversity</h2>
<aside class="notes">
<p>Another regular feature of the Pycon conference and the Python community as a whole is the attitude of radical inclusiveness. Only a few years ago the number of female attendees was around 5%, but with explicit efforts to address this systematic bias, we’ve been able to increase that to nearer 20%, and fully half of the talks, keynotes, and conference organising is done by women, trans and nonbinary folks. There’s still a long way to go, but, to me, it’s absolutely joyful to see that the problem is tractable, and given pro-active efforts, we’re getting better year on year.</p>
<p>The diversity of diverse values</p>
<p>The word has spread that Python welcomes everybody, and the common refrain, on lips and on T-shirts, was that people “Came for the language, stayed for the community.”</p>
</aside>
</section>
<section id="all-on-youtube" class="slide level2">
<h2>All on Youtube</h2>
<aside class="notes">
<p>All talks (30/45 minutes) and tutorials (3 hours) are now on YouTube:</p>
</aside>
<p>https://www.youtube.com/channel/UCsX05-2sVSH7Nx3zuk3NYuQ/videos</p>
<p>Search ‘PyCon 2018’</p>
<aside class="notes">
<p>If you are travelling home from a conference, unsure of your internet connectivity, you can sign up for YouTube Red (soon to be called “Premium”), for a month free trial, and can then download videos to your phone.</p>
<p>Remember also that youtube can playback videos at x1.5 or even x2 speed.</p>
<p>Combine those two features, you can make decent headway through all the talks you missed while flying home from the conference.</p>
<p>Some particular highlights of the talks for me were:</p>
<h3 id="language-features">Language features</h3>
<p>Elegant solutions for everyday python problems, by Nina Zakherenko (ie. magic methods, partial methods, context managers, decorators, namedtuples) https://www.youtube.com/watch?v=WiQqqB9MlkA</p>
<p>Dataclasses by Raymond Hettinger https://www.youtube.com/watch?v=T-TwcmT6Rcw&amp;t=1377s</p>
<p>Effortless logging: A deep dive into the logging module by Mario Corchero https://www.youtube.com/watch?v=Pbz1fo7KlGg&amp;t=1134s</p>
<p>HOWTO write a function, by Jack Diederich (A thirty minute code review, no holds barred. Spot on.) https://www.youtube.com/watch?v=rrBJVMyD-Gs&amp;t=933s</p>
<h4 id="type-annotations-8">Type annotations</h4>
<p>Types, deeper static analysis, and you. By Pieter Hooiumeijer https://www.youtube.com/watch?v=hWV8t494N88</p>
<p>Type-checked Python in the real world by Carl Meyer https://www.youtube.com/watch?v=pMgmKJyWKn8</p>
<p>https://www.youtube.com/watch?v=0c46YHS3RY8 Clearer Code at Scale: Static Types at Zulip and Dropbox, by Greg Price</p>
<h3 id="compsci">CompSci</h3>
<p>Big-O: How code slows and data grows by Ned Batchelder https://www.youtube.com/watch?v=duvZ-2UK0fc</p>
<h3 id="deployment-systems-devops-containers">Deployment, Systems, DevOps, Containers</h3>
<p>Systemd: why you should care as a Python programmer, by Alvaro Leiva Geisse https://www.youtube.com/watch?v=ZUX9Fx8Rwzg</p>
<p>How Netflix does failovers in 7 minutes flat. (He means switching NetFlix’s audience, 1/3 of the internet’s traffic at peak, from using regions A and B, to using B and C.) https://www.youtube.com/watch?v=iQI56-up3Yk&amp;t=1673s</p>
<p>How to write deployment friendly applications, by Hynek Schlawack https://www.youtube.com/watch?v=wuCpCkrfeMs&amp;t=568s</p>
<p>A Python-flavored introduction to containers and kubernetes, by Ruben Orduz &amp; Nolan Brubaker https://www.youtube.com/watch?v=kx-048qE-TI&amp;t=6s</p>
<h3 id="async">Async</h3>
<p>Trio: Async concurrency for mere mortals, by Nathaniel Smith (Interesting new approach built on top of asyncio, using new primitives which seem to make async easier to understand, more correct, and with dramatically less code.) https://www.youtube.com/watch?v=oLkfnc_UMcE</p>
<p>Thinking outside the GIL with AsyncIO and Multiprocessing, by John Reese https://www.youtube.com/watch?v=0kXaLh8Fz3k</p>
<h3 id="data-wrangling-machine-learning-numerical">Data wrangling, machine learning, numerical:</h3>
<p>Performance Python: seven strategies for optimizing numerical code by Jake VanderPlas https://www.youtube.com/watch?v=zQeYx87mfyw</p>
<p>A practical guide to Singular Value Decomposition by Daniel Pyrathon. https://www.youtube.com/watch?v=d7iIb_XVkZs</p>
<h3 id="packaging">Packaging</h3>
<p>Pipenv: The future of Python dependency management, by Kenneth Reitz https://www.youtube.com/watch?v=GBQAKldqgZs</p>
<h3 id="workflow">Workflow</h3>
<p>Solve your problem with sloppy Python, by Larry Hastings (A modest sounding topic, but Larry is smart and gets-things-done, we can all learn a few things from him.) https://www.youtube.com/watch?v=Jd8ulMb6_ls</p>
</aside>
</section>
    </div>
  </div>

  <script src="../reveal.js/lib/js/head.min.js"></script>
  <script src="../reveal.js/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Push each slide change to the browser history
        history: true,

        // Optional reveal.js plugins
        dependencies: [
          { src: '../reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '../reveal.js/plugin/zoom-js/zoom.js', async: true },
          { src: '../reveal.js/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
